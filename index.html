<!DOCTYPE html>
<html>
<head>
  <title>Palmerston North Historical Maps</title>
  <meta charset="utf-8" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; }
    .slider-container {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 8px;
      border-radius: 4px;
      box-shadow: 0 0 5px rgba(0,0,0,0.3);
      font-family: sans-serif;
	  z-index: 1000; /* <-- add this */


    }
    .slider-container label {
      display: block;
      margin-top: 6px;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <!-- Transparency sliders -->
  <div class="slider-container">
    <label>1866 Map Opacity
      <input id="opacity1866" type="range" min="0" max="1" step="0.1" value="1">
    </label>
    <label>1874 Map Opacity
      <input id="opacity1874" type="range" min="0" max="1" step="0.1" value="1">
    </label>
    <label>1989 Map Opacity
      <input id="opacity1989" type="range" min="0" max="1" step="0.1" value="1">
    </label>
    <!-- No slider for DEM -->
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>


<script>
  // Initialize map
  var map = L.map('map').setView([-40.355, 175.611], 14);

  // Base OSM
  var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

  // Historical layers
  var map1866 = L.tileLayer('./1866Map/{z}/{x}/{y}.png', { attribution: '1866 Map' });
  var map1874 = L.tileLayer('./1874Map/{z}/{x}/{y}.png', { attribution: '1874 Map' });
  var map1989 = L.tileLayer('./1989Map/{z}/{x}/{y}.png', { attribution: '1989 Map' });
  var demLayer = L.tileLayer('./DEM/{z}/{x}/{y}.png', { attribution: 'DEM' });

  // Layer controls
  var baseMaps = { "OpenStreetMap": osm };
  var overlayMaps = {
    "1866 Map": map1866,
    "1874 Map": map1874,
    "1989 Map": map1989,
    "DEM": demLayer
  };
  L.control.layers(baseMaps, overlayMaps).addTo(map);
  
   // --- Transparency sliders ---
    document.getElementById('opacity1866').addEventListener('input', function(e) {
      map1866.setOpacity(e.target.value);
    });
    document.getElementById('opacity1874').addEventListener('input', function(e) {
      map1874.setOpacity(e.target.value);
    });
    document.getElementById('opacity1989').addEventListener('input', function(e) {
      map1989.setOpacity(e.target.value);
    });
    // DEM left at full opacity, no slider



  // --- Overlay ordering ---
  map.on('overlayadd', function(e) {
    // When a layer is added, bring it to front
    e.layer.bringToFront();
  });

  // --- Reset button ---
  var resetControl = L.control({position: 'topright'});
  resetControl.onAdd = function(map) {
    var div = L.DomUtil.create('div', 'leaflet-bar leaflet-control leaflet-control-custom');
    div.innerHTML = '<button style="padding:4px;">Reset</button>';
    div.onclick = function(){
      // Remove all overlays
      map.removeLayer(map1866);
      map.removeLayer(map1874);
      map.removeLayer(map1989);
      map.removeLayer(demLayer);
    };
    return div;
  };
  resetControl.addTo(map);
</script>
</body>
</html>